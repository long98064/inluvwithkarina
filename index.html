<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>aespa Gallery Archive</title>
    <link rel="stylesheet" href="style.css">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
</head>
<body>

    <h1>AESPA UPDATES</h1>

    <div class="tabs-container" id="tabs"></div>

    <div id="gallery"></div>

    <script>
        let globalData = null;

        async function init() {
            try {
                const response = await fetch('data.json');
                globalData = await response.json();
                renderTabs();
                if (globalData.profiles.length > 0) {
                    showFeed(globalData.profiles[0].username);
                }
            } catch (err) { console.error(err); }
        }

        function renderTabs() {
            const tabsContainer = document.getElementById('tabs');
            globalData.profiles.forEach((idol, index) => {
                const btn = document.createElement('button');
                btn.className = `tab-button ${index === 0 ? 'active' : ''}`;
                btn.innerText = idol.name;
                btn.onclick = () => {
                    document.querySelectorAll('.tab-button').forEach(b => b.classList.remove('active'));
                    btn.classList.add('active');
                    showFeed(idol.username);
                };
                tabsContainer.appendChild(btn);
            });
        }

       function showFeed(username) {
    const gallery = document.getElementById('gallery');
    gallery.innerHTML = ''; 
    const selectedIdol = globalData.profiles.find(p => p.username === username);
    
    if (selectedIdol && selectedIdol.posts) {
        selectedIdol.posts.forEach(post => {
            const div = document.createElement('div');
            
            // Nếu là ảnh Pinterest (link trực tiếp)
            if (post.type === 'pinterest' || post.url.includes('pinimg.com')) {
                div.className = 'post-container active pinterest-mode'; // Thêm class riêng
                div.innerHTML = `
                    <div class="pinterest-card">
                        <img src="${post.url}" alt="Idol Photo" loading="lazy">
                    </div>
                `;
            } 
            // Nếu là bài Instagram
            else {
                div.className = 'post-container active';
                div.innerHTML = `<blockquote class="instagram-media" data-instgrm-permalink="${post.url}" data-instgrm-version="14"></blockquote>`;
            }
            gallery.appendChild(div);
        });

        // Chỉ chạy script Instagram nếu có bài Instagram trên trang
        if (document.querySelector('.instagram-media')) {
            if (window.instgrm) {
                window.instgrm.Embeds.process();
            } else {
                const script = document.createElement('script');
                script.async = true;
                script.src = "//www.instagram.com/embed.js";
                document.body.appendChild(script);
            }
        }
    }
}
        init();
    </script>
</body>
</html>


